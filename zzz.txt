Instagram

document.querySelectorAll('div').forEach(div => {
    if (div.childNodes.length === 2 &&
        div.childNodes[0].nodeType === Node.TEXT_NODE &&
        div.childNodes[0].textContent.trim() === "More posts from") {
        div.querySelectorAll('a').forEach(a => {
            console.log(a.textContent);
        });
    }
});




const mainElement = document.querySelector('main');

if (mainElement) {
  const firstDiv = mainElement.querySelector('div');

  if (firstDiv) {
    const secondDiv = firstDiv.querySelector('div');

    if (secondDiv) {
      const thirdDiv = secondDiv.querySelector('div');

      if (thirdDiv) {
        const fourthDiv = thirdDiv.querySelector('div');

        if (fourthDiv) {
          const imgAndVideoCount = Array.from(fourthDiv.querySelectorAll('img, video')).length;

          console.log('Number of <img> or <video> tags inside the fourth <div> inside <main>: ', imgAndVideoCount);
        } else {
          console.log('No fourth <div> found inside the third <div>.');
        }
      } else {
        console.log('No third <div> found inside the second <div>.');
      }
    } else {
      console.log('No second <div> found inside the first <div>.');
    }
  } else {
    console.log('No first <div> found inside <main>.');
  }
} else {
  console.log('<main> tag not found.');
}


https://www.instagram.com/p/C8UahW1Nx4y/?img_index=5
https://www.instagram.com/p/C868LktM6Jb/

in reels remove the s 
https://www.instagram.com/reel/C85QHmzoZQJ/


facebook


new Promise((resolve) => {
        setTimeout(resolve, 5000);
    }).then(() => {
        const container = document.querySelector(".inline-video-container");
        if (container) {
            const videoTags = container.getElementsByTagName("video");
            console.log(videoTags.length);
        } else {
            console.log("No inline-video-container found");
        }
    });

inspect, play video then the Promise
works for both reels and video



https://v16-webapp-prime.tiktok.com/video/tos/useast2a/tos-useast2a-pve-0068/oIK0jD5IfCFsBADfEQma4Jmtz2RimAyhEECBQP/?a=1988&bti=ODszNWYuMDE6&ch=0&cr=3&dr=0&lr=unwatermarked&cd=0%7C0%7C0%7C&cv=1&br=394&bt=197&cs=0&ds=6&ft=4fUEKMkj8Zmo0eiwG-4jVRTyppWrKsd.&mime_type=video_mp4&qs=5&rc=N2RlODc3PDczPDo4N2VnM0Bpajg4Om05cmpmdDMzNzczM0BiMTIyNV4xXy4xM2EuYF42YSNjLy1hMmRzcGFgLS1kMTZzcw%3D%3D&btag=e00090000&expire=1721689852&l=20240722170904F6395C5699D934330126&ply_type=2&policy=2&signature=cccb1d06d42f0d36dff3909e734afdda&tk=tt_chain_token